<script>
import lockPromotionIllustration from '@gitlab/svgs/dist/illustrations/lock_promotion.svg';
import Icon from '~/vue_shared/components/icon.vue';
import eventHub from '../event_hub';

export default {
  components: {
    Icon,
  },
  computed: {
    lockPromotionIllustration() {
      return lockPromotionIllustration;
    },
  },
  methods: {
    dismissCanaryPromo() {
      eventHub.$emit('dismissCanaryPromo');
    },
  },
};
</script>

<template>
  <div class="d-flex p-3 environments-canary-promo">
    <div
      class="svg-container pr-3"
      v-html="lockPromotionIllustration"
    />

    <div class="pl-3">
      <p class="font-weight-bold mb-1">
        Upgrade plan to unlock Canary Development feature
      </p>

      <p class="environments-canary-promo-message">
        Canary Development is a popular CI strategy, where a small portion of the fleet is
        updated to the new version of your application.
        <a href="https://docs.gitlab.com/ee/user/project/canary_deployments.html">
          Read more
        </a>
      </p>

      <a href="https://about.gitlab.com/sales/" class="btn btn-outline-primary">
        Contact sales to upgrade
      </a>
    </div>

    <div class="ml-auto pr-2 environments-canary-promo-close" @click="dismissCanaryPromo"> 
      <icon name="close" />
    </div>
  </div>
</template>
